<section class="layout">
  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <x-navbar xTitle="Mi Perfil" backUrl="/pets" [xActions]="xActions" />
    <ng-template #xActions>
      <button type="submit" [disabled]="profileForm.invalid || isSaving() || isReadOnly()">
        @if (isSaving()) { Guardando... } @else { Guardar }
      </button>
    </ng-template>

    <main class="pet-registration">
      @if (isLoading()) {
      <div class="loading-container">
        <progress class="circle large primary"></progress>
        <h6 class="secondary-text">Cargando perfil...</h6>
      </div>
      } @else {

      <div class="hero-section">
        <div class="hero-content">
          <mat-icon fontIcon="person"></mat-icon>
          <h1 class="hero-title">Mi Perfil</h1>
          <p class="hero-subtitle">Administra tu información personal</p>
        </div>
      </div>

      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">¿Por qué es importante?</h2>
        </div>
        <p>
          Esta información se compartirá cuando reportes una mascota perdida, para que las personas
          que la encuentren puedan contactarte fácilmente.
        </p>
      </div>

      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">Información Personal</h2>
        </div>

        <div class="input-group">
          <h6 class="field-label">Nombre completo</h6>
          <mat-form-field class="mat-field">
            <input
              matInput
              formControlName="xName"
              placeholder="Ingresa tu nombre completo"
              [readonly]="isReadOnly()"
            />
            @if (profileForm.get('xName')?.invalid && profileForm.get('xName')?.touched) {
            <mat-error>{{ getErrorMessage('xName') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="input-group">
          <h6 class="field-label">Correo electrónico</h6>
          <mat-form-field class="mat-field">
            <input
              matInput
              type="email"
              formControlName="xEmail"
              placeholder="ejemplo@correo.com"
              [readonly]="isReadOnly()"
            />
            @if (profileForm.get('xEmail')?.invalid && profileForm.get('xEmail')?.touched) {
            <mat-error>{{ getErrorMessage('xEmail') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="input-group">
          <h6 class="field-label">Teléfono</h6>
          <mat-form-field class="mat-field">
            <input
              matInput
              type="tel"
              formControlName="xPhone"
              placeholder="12345678"
              [readonly]="isReadOnly()"
            />
            @if (profileForm.get('xPhone')?.invalid && profileForm.get('xPhone')?.touched) {
            <mat-error>{{ getErrorMessage('xPhone') }}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="input-group">
          <h6 class="field-label">Dirección</h6>
          <mat-form-field class="mat-field textarea-field">
            <textarea
              matInput
              formControlName="xDirection"
              placeholder="Ingresa tu dirección completa"
              rows="3"
              [readonly]="isReadOnly()"
            ></textarea>
            @if (profileForm.get('xDirection')?.invalid && profileForm.get('xDirection')?.touched) {
            <mat-error>{{ getErrorMessage('xDirection') }}</mat-error>
            }
          </mat-form-field>
        </div>
      </div>

      }
    </main>
  </form>
</section>
